# RealSense Camera Frame Capture and Depth Extraction

This repository contains Python scripts for capturing frames from an Intel RealSense camera and extracting depth information from those frames. The scripts are designed to work on Windows systems and are located in the `windows/capture_and_extract_Frames` folder.

## Contents

- `capture.py`: Captures frames from a live feed using a RealSense camera. Saves the frames in RGB and Depth formats and stores the depth array in a CSV file.
- `extract.py`: Extracts the depth at any pixel point from the depth CSV file and provides the depth value of that point.

## Prerequisites

Before using the scripts, ensure you have the following installed:

- Python 3.x
- Intel RealSense SDK 2.0
- numpy
- opencv-python

You can install the required Python packages using pip:

```bash
pip install pyrealsense2 numpy opencv-python
```

## Usage

### Capture Frames

The `capture.py` script captures frames from the RealSense camera and saves the following:

- RGB image (`.png` format)
- Depth image (`.png` format)
- CSV file containing the depth array of the current frame

#### Running `capture.py`

1. Connect your Intel RealSense camera to your Windows machine.
2. Navigate to the `windows/capture_and_extract_Frames` folder in your terminal or command prompt.
3. Run the script:

```bash
python capture.py
```

The script will start capturing frames from the live feed and save them in the specified formats.

### Extract Depth

The `extract.py` script extracts the depth at any pixel point from the CSV file containing depth data and provides the depth value of that point.

#### Running `extract.py`

1. Ensure you have the CSV file generated by the `capture.py` script.
2. Navigate to the `windows/capture_and_extract_Frames` folder in your terminal or command prompt.
3. Run the script with the required arguments:

```bash
python extract.py
```

The script will read the CSV file and output the depth value at the specified pixel coordinates.

### Example Code for `extract.py`

The `extract.py` script uses the following code to extract depth data:

```python
import csv

def get_depth_at_pixel(csv_file_path, cx, cy):
    """
    Get the depth at a specified pixel coordinate (cx, cy) from a CSV file containing depth data.
    
    Args:
        csv_file_path (str): Path to the CSV file containing depth data.
        cx (int): X-coordinate of the pixel.
        cy (int): Y-coordinate of the pixel.
    
    Returns:
        float: Depth value at the specified pixel coordinate.
    """
    with open(csv_file_path, 'r') as csv_file:
        reader = csv.reader(csv_file)
        depth_data = list(reader)
    
    depth_value = float(depth_data[cy][cx])
    
    return depth_value

csv_file_path = "csv/depth_data9.csv"  # Path to your CSV file
cx = 412 # Example pixel x-coordinate
cy = 209  # Example pixel y-coordinate

depth_value = get_depth_at_pixel(csv_file_path, cx, cy)
print(f"Depth value at pixel ({cx}, {cy}): {depth_value}")
```

This script reads the depth data from the specified CSV file and retrieves the depth value at the given pixel coordinates.

### Folder Structure in Your Repository

To include this installation guide in your repository, create a separate folder for it. Here’s how you can structure your repository:

```
.
├── windows/
│   └── capture_and_extract_Frames/
│       ├── capture.py
│       ├── extract.py
│       └── output/
│           ├── images/
│           │   ├── frame_rgb.png
│           │   └── frame_depth.png
│           └── depth_data/
│               └── frame_depth.csv
├── jetson_installation/
│   ├── installLibrealsense.sh
│   ├── buildLibrealsense.sh
│   └── README.md
└── README.md
```

- `capture.py` will save the RGB and Depth images in the `output/images/` folder and the depth array CSV in the `output/depth_data/` folder.
- `extract.py` will read the depth CSV file from the specified path.

## Jetson Installation Guide

For instructions on installing librealsense on Jetson devices, refer to the [Jetson Installation Guide](./jetson_installation/Jetson_Installation_Guide.md).

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for more details.

## Contributing

Contributions are welcome! Please open an issue or submit a pull request for any improvements or bug fixes.

## Contact

For any questions or support, please open an issue in this repository.

---
